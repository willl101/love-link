<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>时光纽带</title>
    <link rel="stylesheet" href="styles-v2.css">
</head>
<body>
    <!-- 密码验证层 -->
    <div id="authOverlay" class="auth-overlay">
        <div class="auth-card">
            <div class="auth-emoji">💕</div>
            <h1>时光纽带</h1>
            <p>输入密码进入我们的世界</p>
            <input type="tel" id="passwordInput" placeholder="••••" maxlength="4" pattern="[0-9]*" inputmode="numeric">
            <div id="authError" class="error-message"></div>
        </div>
    </div>

    <!-- 初始设置层 -->
    <div id="setupOverlay" class="setup-overlay hidden">
        <div class="setup-card">
            <h2>初次见面</h2>
            <div class="setup-form">
                <input type="text" id="name1" placeholder="你的名字" maxlength="10">
                <span class="heart-separator">💕</span>
                <input type="text" id="name2" placeholder="TA的名字" maxlength="10">
                <div class="date-input-wrapper">
                    <label>我们的纪念日</label>
                    <input type="date" id="anniversary">
                </div>
                <button id="startBtn" class="primary-btn">开始记录</button>
            </div>
        </div>
    </div>

    <!-- 主内容 - 连续滑动纽带 -->
    <div id="mainContent" class="main-content hidden">
        <!-- 固定头部 -->
        <header class="fixed-header">
            <div class="header-content">
                <div class="couple-names">
                    <span id="displayName1">名字</span>
                    <span class="heart-beat">❤️</span>
                    <span id="displayName2">名字</span>
                </div>
                <div class="days-counter">
                    第 <span id="daysCount">0</span> 天
                </div>
            </div>
            <button id="settingsBtn" class="settings-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M12 1v6m0 6v6m4.22-13.22l4.24 4.24M1.54 1.54l4.24 4.24M21 12h-6m-6 0H3m13.22 4.22l4.24 4.24M1.54 21.54l4.24 4.24"></path>
                </svg>
            </button>
        </header>

        <!-- 连续滑动容器 -->
        <div class="scroll-container" id="scrollContainer">
            <div class="timeline-ribbon">
                <!-- 区域1: 欢迎与小窝 -->
                <section class="ribbon-section section-home">
                    <div class="section-content">
                        <div class="welcome-area">
                            <h2 class="section-title">我们的小窝</h2>
                            <div class="home-photo-area" id="homePhotoArea">
                                <input type="file" id="homePhotoInput" accept="image/*" hidden>
                                <div class="photo-placeholder" id="homePlaceholder">
                                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                        <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                        <polyline points="21 15 16 10 5 21"></polyline>
                                    </svg>
                                    <p>点击上传小窝照片</p>
                                </div>
                                <img id="homePhoto" class="home-photo hidden" alt="小窝">
                            </div>
                            <div class="daily-tip-card">
                                <span class="tip-emoji">💝</span>
                                <p id="dailyTip" class="tip-text">爱是耐心，爱是善良</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 区域2: 今日心情 -->
                <section class="ribbon-section section-mood">
                    <div class="section-content">
                        <h2 class="section-title">今日心情</h2>
                        <div class="mood-input-area">
                            <div class="emoji-picker">
                                <button class="emoji-option active" data-emoji="😊">😊</button>
                                <button class="emoji-option" data-emoji="🥰">🥰</button>
                                <button class="emoji-option" data-emoji="😔">😔</button>
                                <button class="emoji-option" data-emoji="😴">😴</button>
                                <button class="emoji-option" data-emoji="🤗">🤗</button>
                            </div>
                            <textarea id="moodInput" placeholder="记录此刻的心情..." maxlength="100"></textarea>
                            <button id="addMoodBtn" class="add-mood-btn">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19"></line>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                </svg>
                            </button>
                        </div>
                        <div class="mood-timeline" id="moodTimeline">
                            <!-- 心情卡片动态生成 -->
                        </div>
                    </div>
                </section>

                <!-- 区域3: 倒计时 -->
                <section class="ribbon-section section-countdown">
                    <div class="section-content">
                        <h2 class="section-title">期待相见</h2>
                        <div class="countdown-card">
                            <div class="countdown-display" id="countdownDisplay">
                                <div class="countdown-number">
                                    <span id="countdownDays">0</span>
                                    <label>天</label>
                                </div>
                            </div>
                            <input type="date" id="meetDate" class="date-picker">
                            <p class="countdown-label">下次见面</p>
                        </div>
                        <button id="hugBtn" class="hug-btn">
                            <span class="hug-emoji">🤗</span>
                            <span>发送拥抱</span>
                        </button>
                    </div>
                </section>

                <!-- 区域4: 时光照片流 -->
                <section class="ribbon-section section-photos">
                    <div class="section-content">
                        <h2 class="section-title">时光印记</h2>
                        <div class="photo-grid" id="photoGrid">
                            <div class="add-photo-card" id="addPhotoCard">
                                <input type="file" id="photoInput" accept="image/*" multiple hidden>
                                <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <line x1="12" y1="5" x2="12" y2="19"></line>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                </svg>
                            </div>
                            <!-- 照片动态生成 -->
                        </div>
                    </div>
                </section>

                <!-- 区域5: 更多照片流（纽带式延续） -->
                <section class="ribbon-section section-photo-flow">
                    <div class="photo-ribbon" id="photoRibbon">
                        <!-- 纽带式照片流 -->
                    </div>
                </section>
            </div>
        </div>

        <!-- 滑动指示器 -->
        <div class="scroll-indicator" id="scrollIndicator">
            <span>← 滑动探索 →</span>
        </div>
    </div>

    <!-- 拥抱动画 -->
    <div id="hugAnimation" class="hug-animation hidden">
        <div class="hug-hearts">
            <span class="float-heart" style="--delay: 0s">💕</span>
            <span class="float-heart" style="--delay: 0.3s">💖</span>
            <span class="float-heart" style="--delay: 0.6s">💗</span>
            <span class="float-heart" style="--delay: 0.9s">💓</span>
        </div>
        <p class="hug-message">温暖的拥抱已送达</p>
    </div>

    <!-- 图片查看器 -->
    <div id="photoViewer" class="photo-viewer hidden">
        <img id="viewerImage" alt="查看图片">
        <button id="closeViewer" class="close-viewer">×</button>
    </div>

    <script src="app-v2.js"></script>
</body>
</html>